IPv6（Internet Protocol version 6）は、IPv4の後継となるインターネットプロトコルです。IPv6は、インターネットの急速な成長とともに発生したIPv4アドレスの枯渇問題を解決するために設計されました。

#### 主なポイント
1. **拡張されたアドレス空間**: IPv6はv4の32bitから128ビットのアドレスを使用するため、膨大な数のIPアドレスを割り当てることが可能です。
2. **簡素化されたヘッダ**: IPv6は、ルーティング効率とパフォーマンス向上を目的としてヘッダを簡素化し、固定長化しています。
3. **セキュリティ**: IPsecというセキュリティプロトコルが標準で組み込まれています。
4. **自動設定**: IPv6には、アドレスの自動設定機能（SLAAC, DHCPv6など）があります。
5. **モビリティとマルチキャスト**: IPv6は、モバイルデバイスやマルチキャスト通信に対するサポートが強化されています。特製グループのうち経路上最も近いノード、あるいは最適なノードにデータを送信するエニーキャストを追加。



#### アドレスの例
IPv4のアドレスは通常、10進数のドット区切り形式（例: 192.168.1.1）で表されます。一方で、IPv6アドレスは128ビットであり、16進数とコロン（:）を用いた形式（例: 2001:0db8:85a3:0000:0000:8a2e:0370:7334）で表されます。

各ブロックの先頭から続く0は、1つを残し、以降は省略可能:
2001:0db8:85a3:0:0:8a2e:0370:7334

0のブロックが続く場合、一箇所に限り、::に省略することが可能。
2001:0db8:85a3::8a2e:0370:7334

### プレフィックス
IPv6ではサブネットマスクはなく、プレフィックス記法でネットワークとホストを区別する。
例えば:　`2001:db8:100:1000::/56`は56bitまでネットワークアドレスで、それ以降はホストアドレスと表す。

#### 実世界の例

- **スマートデバイス**: IoT（Internet of Things）の普及により、多くのスマートデバイスがインターネットに接続するようになりました。IPv6の広いアドレス空間は、これらのデバイス全てにユニークなアドレスを提供できます。
  
- **企業ネットワーク**: IPv6を採用することで、企業は内部ネットワークでNAT（Network Address Translation）を使用する必要がなくなり、エンドツーエンドの通信が容易になります。

- **インターネットバックボーン**: ルーティング効率の向上とアドレスの簡単な管理のために、多くのインターネットバックボーンプロバイダーがIPv6を導入しています。


### ユニキャストアドレス（Unicast Address）

#### 主なポイント
1. **一対一の通信**: ユニキャストアドレスは、特定のネットワーク上の一つの宛先（デバイスやインターフェース）にパケットを送るためのアドレスです。
2. **IPアドレスの基本形**: これが最も一般的に使用されるIPアドレスのタイプです。

#### 構成特徴
- IPv4：通常、10進数のドット区切り形式（例: 192.168.1.1）
- IPv6：16進数とコロンを用いた形式（例: 2001:0db8:85a3:0000:0000:8a2e:0370:7334）

#### 用途
- **一般的なインターネット通信**: ウェブサーフィン、メール送信、ファイル転送など。

### エニーキャストアドレス（Anycast Address）

#### 主なポイント
1. **最も近い宛先への通信**: 同じエニーキャストアドレスを持つ複数のデバイスが存在する場合、送信元から最も近い（通常はホップ数または遅延で測定）デバイスにパケットがルーティングされます。
2. **冗長性と負荷分散**: エニーキャストは自然な冗長性と負荷分散機構を提供します。

#### 構成特徴
- エニーキャストアドレスは、通常、既存のユニキャストアドレス範囲から割り当てられます。

#### 用途
- **DNSサーバ**: 世界中に分散したDNSサーバが同じエニーキャストアドレスを使用することで、ユーザーは最も近いDNSサーバに接続します。
  
### マルチキャストアドレス（Multicast Address）

#### 主なポイント
1. **一対多の通信**: マルチキャストアドレスを使用すると、一つの送信元から複数の宛先に同時にパケットを送ることができます。
2. **帯域幅の効率的な使用**: 同じデータを多数の宛先に送る必要がある場合、マルチキャストは帯域幅を節約する効果があります。

#### 構成特徴
- IPv4：特定の範囲（224.0.0.0 から 239.255.255.255）のIPアドレスがマルチキャストに使用されます。
- IPv6：IPv6では、`FF00::/8` のプレフィックスを持つアドレスがマルチキャストに割り当てられます。

#### 用途
- **ビデオ・オーディオストリーミング**: 同じコンテンツを多数のユーザーに配信する場合。
- **ネットワーク管理**: SNMP（Simple Network Management Protocol）などのプロトコルで使用されます。

これらのアドレスタイプは、それぞれ特有の用途と構造を持っており、ネットワークの効率性、スケーラビリティ、柔軟性を高めるために使用されます。


### IPv6ヘッダ
IPv6のヘッダは、IPv4のヘッダよりも設計が簡素化されており、固定長の40バイトです。この簡素な設計により、ルータやスイッチはパケットの処理が高速化され、ネットワークのパフォーマンスが向上します。

#### IPv6ヘッダの主要なフィールド

1. **バージョン (Version)**: このフィールドは4ビットであり、プロトコルのバージョンを示します。IPv6の場合、このフィールドの値は常に`6`です。
  
2. **トラフィッククラス (Traffic Class)**: この8ビットのフィールドは、パケットがどのように扱われるべきかを示します。このフィールドは、QoS（Quality of Service）に影響を与えます。
  
3. **フローレーベル (Flow Label)**: この20ビットのフィールドは、同じ「フロー」に属するパケットを識別します。フローとは、同じソースと宛先間での一連のパケットです。
  
4. **ペイロード長 (Payload Length)**: この16ビットのフィールドは、オプションのIPv6拡張ヘッダと後続のデータ部分（ペイロード）の合計長を示します。
  
5. **次ヘッダ (Next Header)**: この8ビットのフィールドは、ペイロードのタイプを示します。例えば、TCPやUDPなどのトランスポート層のプロトコルを指します。また、このフィールドはIPv6拡張ヘッダも指す場合があります。
  
6. **ホップリミット (Hop Limit)**: この8ビットのフィールドは、パケットが通過できるルータの最大数を示します。この値が0になると、パケットは破棄されます。
  
7. **ソースアドレスと宛先アドレス**: それぞれ128ビットのアドレスで、パケットの送信元と宛先を示します。

#### 実世界の例

- **ルーティングデバイス**: ルータやスイッチは、IPv6ヘッダの簡素な設計により、高速なパケット転送が可能です。
  
- **エンドツーエンド通信**: `Hop Limit`と`Next Header`のようなフィールドは、エンドツーエンドの通信品質とセキュリティを強化します。

**注意**: IPv6は、必要に応じて「拡張ヘッダ」を使用できます。これは、オプションの情報（セキュリティ、ルーティングオプションなど）を提供するためのもので、基本ヘッダの後に続きます。しかし、これはオプションであり、基本の40バイトのヘッダだけでも十分なケースが多いです。

IPv6のヘッダ設計は、高速なパケット処理と効率的なルーティングを目的としています。この設計により、IPv6はスケーラビリティとパフォーマンスの面で優れた特性を持っています。


[[NATとNAPT]]
[[ICMP]]
[[IPSec]]

---
- ESP (Encapsulating Security Payload)
AHと同様にIPsecプロトコルを構成する技術の一つで、IPパケットの送信元の認証やパケットが改ざんされていないか確認して、暗号化を行います。