
## 1.　シフトレジスタとは？

シフトレジスタは信号を並べ替えたり変換したりして、**一つの配線で膨大な信号伝送を可能にしたデバイス**です。　

ちなみに最も初期のシフトジレスタは、1940年代、第二次世界大戦下のイギリスにて、枢軸国側であったドイツの暗号通信の解読のために用いられた電子計算機**Colossus；コロッサス**に見られます。

シフトレジスタは、マイクロプロセッサ内部に搭載されるレジスタの一種となります。

ただし、通常のレジスタと言えばデータを一時的に保存するメモリの役割を果たすデバイスですが、シフトレジスタのイメージとしてはいったん保持したデータを**別の形態の信号に変換させてから送信する**、というものになります。

なお、アナログ回路にもデジタル回路にも使われますが、一般的にシフトレジスタと言った場合は、**デジタルシフトレジスタ**を指すことがほとんどです。

シフトレジスタの構造としては、いくつかのフリップフロップを**カスケード接続する**というものです。

フリップフロップとは、数ある回路の中でも最もシンプルで基本的な構造を採る論理回路で、「0」「1」の二つの状態を保持します。

このフリップフロップはいくつかの種類に分けることができますが、シフトレジスタで用いられるのは**D型フリップフロップ**です。

D型フリップフロップは入力端子から1ビットの信号を送信すると、それを読み込みます(ラッチする、ということ)。

データの入力はクロックによって制御されていますが、別のクロックが加わるまではずっとその1ビットの信号を保持したままとなります。

なお、出力端子も必ず搭載されており、クロックがHighになると保持した信号を出力します。

シフトレジスタではこの複数のD型フリップフロップをカスケード接続(一つのハブに複数素子を接続させる手法。英語で滝を意味するように、何段にも連なった接続が特徴的)することで複数の信号を一つにまとめたりその逆を行ったりする、という仕組みです。

なお、複数の信号の伝送方式を**パラレル**、一つの信号の伝送方式を**シリアル**と呼びます。

いくつフリップフロップが必要かは、保存したいビット数によって異なります。

特に8ビットシフトレジスタが広く用いられています。

この「まとめたり逆を行ったり」のように、データが移動(シフト)していく、というわけですね。

このシフト方式は左から右、あるいは右から左、そして双方向で可能です。

ただし、どのような信号をどのようにシフトさせるかは、後述する接続方式を選択していく必要があります。

## 2. シフトレジスタの接続方式とその種類

シフトレジスタは入出力それぞれの接続方式によって、大まかに4つに分類することができます。

それぞれを解説いたします。

### ① 直列入力直列出力形(SISO)

シフトレジスタのイン(入力側)とアウト(出力側)にシリアル伝送され、クロック制御で1ビットずつシフトする接続形式のものを**直列入力直列出力形**、または**SISO**と呼びます。

シフトする方向は左または右となります。

最も基本的なシフトレジスタの形式で、クロック信号が加えられるごとにフリップフロップを1ビットずつ移動していきます。

フリップフロップ1つにつき1ビットのデータをラッチすることとなるので、これを4個用いれば4ビットのシフトレジスタです。

また、入力された信号と同じ順序で出力されることも意味します。

なお、通常のSISOシフトレジスタだと、最後のフリップフロップに格納されていたデータ1ビットは、入力側の最初のフリップフロップにデータ入力されるごとに失われることとなります。

ただ、指定したデータをラッチし続けるような回路を作ることも可能です。

### ② 直列入力並列出力形(SIPO)

インがシリアル伝送、アウトがパラレル伝送形式のシフトレジスタを直列入力並列出力形、または**SIPO**と呼びます。

文字通り、シリアル信号とパラレル信号を変換する際に用いられます。

シフトレジスタに入力されるデータは1ビットずつですが、フリップフロップ内でラッチしたデータを出力側でまとめて、つまりパラレル伝送で送り出すことができます。

SIPOシフトレジスタでは接続されている全てのフリップフロップに格納されたデータを一緒に読み取り、例えクロック信号によって1ビットずつシフトしても、その状態を読み取ってまとめてくれます。

### ③ 並列入力直列出力形(PISO)

インがパラレル、アウトがシリアル伝送のシフトレジスタを並列入力直列出力形、または**PISO**と呼びます。

こちらも、シリアル信号とパラレル信号を変換することが主な役割です。

PISOシフトレジスタだと、入力信号が複数にまたがり、それらを一度にロードする必要があります。

また、クロック信号によってデータを書き込むにはLOW、ビットをシフトさせるにはHIGHにするなどの制御が必要となりますが、最初のフリップフロップのみの入力に留めれば、前述したSISOシフトレジスタとしても用いることが可能です。

### ④ 並列入力並列出力形(PIPO)

インもアウトもパラレル伝送で行うシフトレジスタを並列入力並列出力形、または**PIPO**と呼びます。

PISOと同様に複数の入力信号をシフトレジスタにロードし、クロック信号がHIGHになったらそれぞれの出力側に同時にシフトされていきます。

バックアップ時の履歴など、特定の情報をラッチするために用いられます。

### ⑤ その他のシフトレジスタ

上記の接続方式の他、データがシフトしていく方向を変化させられる**双方向シフトレジスタ**と呼ばれるものもあります。

これは、**ユニバーサルシフトレジスタ**とも言います。

また、SISOシフトレジスタの入出力を相互接続させて環状シフトレジスタを形成し、入力されたデータを保持し続ける用途でも用いられます。

### 用語

### クロックの立上りエッジ（Clock Rising Edge）

デジタルシステムでは、クロック信号が時間を同期させる役割を果たします。クロック信号は周期的な波形で、立上りエッジは信号が0から1に変化する瞬間を指します。多くのシステムでは、立上りエッジで特定の動作がトリガされます。

### シフトレジスタ（Shift Register）

シフトレジスタは、デジタルデータを一時的に格納し、特定の方向にシフト（移動）させることができる回路です。質問の場合は8ビットのシフトレジスタで、データは上位方向へシフトされます。

### ストローブの立上りエッジ（Strobe Rising Edge）

ストローブ信号は、特定の操作やデータ転送を制御するための信号で、しばしばクロック信号と連動して動作します。立上りエッジで特定の動作がトリガされることが一般的です。
