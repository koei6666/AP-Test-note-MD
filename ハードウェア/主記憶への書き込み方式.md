## 主記憶への書き込み方式
　キャッシュに保存しているデータはいずれ主記憶に書き込みしなければいけなく、その書き込み方式は、大きく分けて以下の２種類がある。
　#ライトスルー方式 
　ライトスルー方式は、キャッシュにデータを書き込みするとき、同時に、主記憶にも同じデータを書き込みする方式。
　この方式の利点は、主記憶に同時書き込みするので、データ一貫性の心配がないことである。
　弱点は、同時書き込みをするので、主記憶とキャッシュ両方の書き込みが完了しないと、CPUは別の処理に移ることができなく、システムの効率に寄与できない。（主記憶の書き込み時間はキャッシュより遅いので、同時に書き込みを実施すると、主記憶の書き込み待ちとなる）
　書き込み効率を向上させるため、 #ライトバッファ を設けたライトスルー方式がある：
　ライトバッファは、高速な先入れ先出し（FIFO）方式のメモリでライトスルー方式における主記憶への書込み速度を向上させるために用いられます。
　キャッシュメモリへの書込みと同時にバッファに書き込んだ後，バッファから主記憶へ順次書き込む。
　　
　#ライトバック方式 
　ライトバック方式は、キャッシュにだけデータを書き込みをした後、データがキャッシュに追い出される時初めてデータを主記憶に書き込みする。
　利点は、データをキャッシュに読み込むだけてCPUが実行に移せるので、高速な処理ができる。
　その反対、キャッシュと主記憶とデータの一貫性を持たないため、書き戻す際、データの一貫性を制御する機構が必要になる。
　（ライトバックは必ずしもデータがキャッシュから追い出される時のみ行うとは限らなく、試ステもの処理空き時間で処理する場合もある。）
　
　#LRU
　ライトバック方式を効率的に駆使するには、キャッシュに保存しているデータ中、追い出すべきデータを正確に定めることが重要である。
　追い出すターゲットを間違えば、入替したばかりのデータをまた主記憶から読み出しなければいけなく、ミスヒット率が増加し、速度はかえて悪化する場合がある。
　対象を決めるアルゴリズムのうち、一番よく使用されているのはLRU(Least Recently Used),このアルゴリズムは #メモリの局所性 中の時間的局所性を生かしている。
　最近アクセスされた情報は近いうちに再度アクセスされる可能性が高いので、逆に前回のアクセスから時間が経つ場合は再度アクセスされる可能性が少ないと推論できるので、前回のアクセスから経った時間に長い順で入れ替えすれば高いヒット率を達成できるであろうという考え方を元の手法。
　
　#ライトバックアルゴリズム
　そのほかに、ライトバック方式の入れ替え対象を定めるアルゴリズムは、FIFO,LIFO
　#LFU (Least Frequently Used):最も使用される頻度が少ないデータから入れ替えする。
　などが挙げられる。
　[[過去問#^926410]]
