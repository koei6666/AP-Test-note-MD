
#待ち行列理論 （Queueing theory）は、特に通信システム、コンピューターネットワーク、運送業などの状況での「待つ」行動を数学的に分析する理論です。

まず待ち時間を求めるための基本要素から説明します。待ち行列理論における基本要素は以下の4つです：
1. 到着パターン：顧客（要求、トランザクションなど）がどのようにシステムに到着するかを記述します。これは通常、ポアソン過程によって表されます。
　#平均到着間隔 ：到着率 λ の逆数で計算されます。すなわち、$$平均到着間隔 = \frac{1}{λ}$$ です。これは、次の顧客が来るまでの平均時間を意味します。単位は通常時間です（例えば、秒、分、時間など）。

2. サービスパターン：各顧客がサービスを受ける時間（サーバーが顧客を処理する時間）を表します。一般的には指数分布でモデル化されます。　
　#平均サービス時間 ：サービス率 μ の逆数で計算されます。すなわち、$$平均サービス時間 = \frac{1}{μ}$$ これは、顧客一人をサービスするのに必要な平均時間を意味します。単位は同様に時間です。

3. サーバーの数：システムが同時にサービスを提供できる顧客の数。(ここではM/M/1モデル、サーバーは1つとする。)
4. キューの長さとディスシプリン：キューに入ることができる顧客の最大数と、どの顧客が次にサービスを受けるかを決定するルール。
　
### 利用率 
　待ち行列理論では、利用率（またはトラフィック強度） ρ は到着率 λ （平均到着時間間隔）とサービス率 μ(平均サービス時間) の比で計算されます。すなわち、$$利用率 = \frac{λ}{μ}$$ この値は、システムがどの程度忙しいか（つまり、顧客をサービスしている割合）を示します。
　例えば、サービス率が60件/秒で、到着率が30件/秒の場合、利用率は$\frac{30}{60}$となり、つまりシステムの50％のキャパシティを利用していること。
　
　利用率が1に近いほど、システムは満杯状態になり、新たな顧客が到着すると待ち時間が大幅に増加する可能性があります。
　
　**例**:100msに1回アクセスが発生するシステムがあるとし、1件あたりの平均処理時間は40ms,利用率は？
　$\lambda(平均到着時間間隔)=100ms$
　$\rho=\frac{40}{100}=0.4$


次に、いくつかの重要な性能指標について説明します。以下の計算では、到着率をλ、サービス率をμとします。
以下の計算式は行列が[[平衡状態]]に達した場合のみ計算可能。

### 平均待ち時間 
顧客がサービスを受けるまでのキューでの平均待ち時間です。M/M/1キューでは、$$平均待ち時間 W = \frac{\rho(利用率)}{1-\rho}\times 平均サービス時間 $$
^cba785
### 平均応答時間 
（または平均系内時間）：顧客がシステムに入ってから出るまでの平均時間で、サービス時間と待ち時間の合計です。M/M/1キュー（マルコフ到着、マルコフサービス、1つのサーバー）では、$$平均応答時間 R = 平均待ち時間+平均サービス時間$$ $$=\frac{\rho}{1-\rho}\times 平均サービス時間　+平均サービス時間$$

3. #平均滞留数 （または平均系内顧客数）：システム内（待ち行列とサービスを受けている状態を含む）にいる顧客の平均数です。M/M/1キューでは、$$平均滞留数 L = \frac{λ}{(μ - λ)}$$

4. #平均待ち行列長 ：待ち行列にいる顧客の平均数です。M/M/1キューでは、$$平均待ち行列長 Lq = \frac{λ^2}{μ(μ - λ)}$$

これらの指標は、システムの性能を評価し、設計や管理の決定を行うために用いられます。例えば、サーバーの数を増やすと平均待ち時間が短くなりますが、これはコスト増加につながるため、適切なバランスを見つける必要があります。

なお、これらの公式は理想的な[[ケンドール記号と確率分布|M/M/1]]キューモデルに基づいています。実際の待ち行列問題では到着とサービスが必ずしもポアソンや指数分布に従わない場合もあり、それぞれの具体的な状況に応じて適切なモデルを選択する必要があります。

