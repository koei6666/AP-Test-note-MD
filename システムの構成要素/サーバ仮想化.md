#サーバ仮想化 は、一台の物理的なサーバを複数の分離された仮想サーバ（仮想マシン）に分割するプロセスです。各仮想マシンは、ハードウェアの共有にも関わらず独自のオペレーティングシステムとアプリケーションを実行することが可能です。例えば、一台の物理サーバ上でWindowsとLinuxの両方を実行することができます。

1. #サーバコンソリデーション ：これはサーバ仮想化の主要な利点で、物理的なサーバの数を減らすことでコストとスペースを節約できます。これにより、電力使用量の削減、管理の簡素化、そしてハードウェア投資の最適化が可能になります。
   コンソリデーション(consolidation)は、統合、統一、合併、整理などの意味を持つ言葉です。
   例えば、5台の物理サーバを1台の物理サーバにコンソリデーションすることで、4台分のハードウェア、電力、冷却コストを節約できます。 ^e3c4c4

## サーバ仮想化の種類
1. #ホスト型仮想化 ：
   
> [!まとめ] 
> ホストOSの上仮想レイアを構築し、そのレイア上で異なるゲストOSを稼動させ、アプリを稼働させる方式。
> ソフトウエアでハードウェアをエミュレートするため、オーバヘッドが大きく、テスト目的に適している。

   これは一般的なオペレーティングシステムの上で動作する仮想化ソフトウェア（[[サーバ仮想化#^90f3bd|ホスト型ハイパーバイザー/Type-2]]）を使用するタイプの仮想化です。ホスト型仮想化はデスクトップ環境やテスト環境でよく使用され、仮想マシンのセットアップと管理が比較的容易であるという利点があります。
   例えば、開発者は自分のPC上でVMware WorkstationやVirtualBoxといったホスト型ハイパーバイザーを使用して、異なるオペレーティングシステムや環境でのアプリケーションテストを行うことができます。
　但し、ホスト型仮想化はソフトウェアでハードウェアをエミュレートしているため、オーバヘッドが大きく、処理速度が遅い。
　![[Pasted image 20230722131410.png]]

2. #ハイパーバイザ型仮想化 ：
   
> [!まとめ] 
> サーバハードウェア上直接仮想環境を構築する方式、仮想レイア上異なるゲストOSを稼働させることが可能。


   これはハードウェア直上にインストールされるハイパーバイザ（[[サーバ仮想化#^30e1d0|Type-1またはベアメタルハイパーバイザー]]）を使用するタイプの仮想化です。ハイパーバイザ型仮想化は、直接ハードウェアにアクセスするため、パフォーマンスが最適化され、リソースの効率的な使用が可能です。これは通常、本番環境や高いパフォーマンスが必要な状況で使用されます。例えば、企業はVMware vSphereやMicrosoft Hyper-Vのようなハイパーバイザ型ハイパーバイザーを使用して、サーバーワークロードを仮想化します。
   ![[Pasted image 20230722131318.png]]
　


3. #コンテナ型仮想化 ：
   
   
> [!まとめ] 
> ホストOS上仮想化レイアを構築する、その上複数のコンテナを分割し、その中でアプリを稼働させる。コンテナはホストOSのカーネルを共有しているのでホストOSと異なるゲストOSを稼働させることはできない。

   これはOSレベルの仮想化を提供し、一つのオペレーティングシステム内で分離された環境（コンテナ）を作成します。各コンテナは、同じOSカーネルを共有しながら（自分のOSやカーネルを持たない）、独自のユーザー空間を持つことが可能です。コンテナ型仮想化は、アプリケーションのパッケージングと配布、マイクロサービスアーキテクチャの採用などに広く利用されています。DockerやKubernetesはこのタイプの仮想化の一例です。
   ![[Pasted image 20230722131347.png]]

### ホスト型、ハイパーバイザ型、コンテナ型の比較：
   - ホスト型：セットアップと管理が容易。性能は最も低い。デスクトップ環境やテスト環境に最適。
   - ハイパーバイザ型：直接ハードウェアにインストールされるため、高いパフォーマンスと効率性。本番環境や高性能が求められる状況に最適。
   - コンテナ型：軽量で、起動が速く、OSを共有する。アプリケーションの分散配布やマイクロサービスに最適。

**ライブマイグレーション、クラスタソフトウェア**：
   - #ライブマイグレーション ：(Live Migration)は、ある物理サーバ上で稼働している仮想マシンを、OSやソフトウェアを停止させることなく別の物理サーバに移し替え、処理を継続させる技術です。切り替えによるダウンタイムはほとんどゼロで、移動前の処理やセッションが全て引き継がれるため可用性を損なうことがありません。
   - ![[Pasted image 20230721211159.png]]
   
   - #クラスタソフトウェア ：これは複数のサーバー（ノード）を一つの群（クラスタ）として管理するためのソフトウェアです。これにより、高い可用性、負荷分散、そして故障時のリカバリを提供します。

8. **その他のキーワード**：
   - #サーバスプロール ：物理サーバが不適切にまたは管理されていないまま増え続ける現象。サーバ仮想化はこの問題を解決するのに役立ちます。
   - [[分散システムの形態#^27f925|VDI]]（Virtual Desktop Infrastructure）：デスクトップ環境を仮想化する技術。これにより、エンドユーザーは各自のデバイスから仮想デスクトップにアクセスすることができます。
   - #NFV （Network Function Virtualization）：ネットワーク機能を仮想化する技術。これにより、ネットワークサービスをソフトウェアとして提供し、ネットワークの設定と展開を容易にします。 ^3fdd8e
     ![[トランスポート層以上の層の接続#^8cb723]]

## #ハイパーバイザ

ハイパーバイザ（または仮想マシンモニター）は、一つの物理的なホストマシン上で複数の仮想マシン（VM）を実行するためのソフトウェアまたはファームウェア、あるいはハードウェアです。ハイパーバイザは物理的なリソース（CPU、メモリ、ストレージなど）をこれらの仮想マシン間で共有し、独立した環境を提供します。

　ハイパーバイザには主に2つのタイプがあります：

　1. **Type-1ハイパーバイザ（ベアメタルハイパーバイザ）**：これらのハイパーバイザは物理的なハードウェアに直接インストールされます。Type-1ハイパーバイザはハードウェアから直接リソースを管理し、それらを各仮想マシンに割り当てます。そのため、これらのハイパーバイザは高いパフォーマンスと効率を提供します。VMware ESXiやMicrosoft Hyper-V ServerはType-1ハイパーバイザの一例です。 ^30e1d0

　2. **Type-2ハイパーバイザ（ホスト型ハイパーバイザ）**：これらのハイパーバイザは、既存のオペレーティングシステム上にインストールされるアプリケーションとして動作します。Type-2ハイパーバイザは物理的なリソースへのアクセスをホストOSを通じて行うため、Type-1ハイパーバイザよりもパフォーマンスは劣りますが、一般的なユーザーや開発者がデスクトップPCやラップトップ上で複数のOS環境を同時に実行するために利用されます。VMware WorkstationやOracle VirtualBoxはType-2ハイパーバイザの一例です。 ^90f3bd

　ハイパーバイザの主な役割は、各仮想マシンが互いに独立して動作し、お互いに影響を及ぼさないようにすることです。また、各仮想マシンに対して物理的なリソースを効率的に割り当て、調整する役割も担っています。

#### 仮想化のメリットとデメリット
仮想化技術を利用すると、物理的なハードウェアリソースを複数の異なる仮想マシンで共有することが可能になります。これには多くのメリットがありますが、一方でいくつかのデメリットも存在します。

**メリット**：

1. **リソースの最適化**：複数の仮想マシンを単一の物理的なサーバー上で実行することで、ハードウェアリソース（CPU、メモリ、ストレージなど）を最大限に活用することが可能になります。これにより、ハードウェアコストを大幅に削減できます。

2. **スケーラビリティ**：仮想マシンは非常に素早く、簡単に作成・削除することができます。また、必要に応じてリソースを追加・削除することも可能です。これにより、需要の変動に迅速に対応できます。

3. **冗長性と復元能力**：仮想マシンのスナップショットを取ることで、システムの状態を保存し、必要に応じて以前の状態に戻すことが可能になります。これにより、システムの障害から迅速に復旧することが可能になります。

4. **隔離**：各仮想マシンは他の仮想マシンから隔離されています。これにより、一つのアプリケーションが他のアプリケーションに影響を及ぼすことを防ぐことができます。

**デメリット**：

1. **パフォーマンス**：仮想化は一部のオーバーヘッドをもたらします。したがって、特にI/Oが重要なアプリケーションにおいては、物理的なサーバーと比較してパフォーマンスが若干低下する可能性があります。

2. **管理の複雑さ**：多数の仮想マシンを適切に管理・運用するためには、専門的な知識とスキルが必要です。また、物理的なサーバーと比較して、セキュリティやライセンス管理の面で複雑さが増す可能性があります。

3. **ハードウェアの制限**：仮想マシンの数や性能は、その基盤となる物理ハードウェアの性能によって制限されます。仮想化を行っても、ハードウェアのリソースが不足している場合、システムのパフォーマンスが低下する可能性があります。

以上が一般的なメリットとデメリットですが、具体的な状況や要件によって、これらの要素が異なる重みを持つことがあります。


