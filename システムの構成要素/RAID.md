## RAID
#RAID （Redundant Array of Independent Disks）は、複数のディスクを一つのロジカルユニットとして扱うための技術です。それぞれのRAIDレベルは異なるデータ分散と冗長性のレベルを提供します。

1. **RAID 0**： #ストライピング と呼ばれる技術を使用し、データを複数のディスクに分散させます。これにより高速な読み書きが可能ですが、ディスク1つでも故障するとディスクアレイ全体が稼働不可になり、データ全体が失われる可能性があります。ディスク1台稼働率：R, ディスクアレイ稼働率：$R^2$

2. **RAID 1**： #ミラーリング と呼ばれる技術を使用し、全てのデータを2つのディスクに同時に書き込みます。1つのディスクが故障しても、もう1つのディスクから全てのデータを読み出すことができます。ディスク1台稼働率：R, ディスクアレイ稼働率：$2R-R^2$

3. **RAID 2**：エラーチェックと修正 (ECC) #ハミング符号  のビットを別のディスクに格納することにより、データの整合性と信頼性を保証します。しかし、このレベルは商用製品ではほとんど使われていません。

4. **RAID 3**： #パリティディスク を使って訂正情報を保有し、冗長性を確保します。データはバイト単位でストライプ化され、パリティ情報は専用のディスクに格納されます。1台まで故障耐性はあり正常な装置間で復元ができる。
　すべての読み書き操作がパリティディスクを経由するため、パリティディスクがボトルネックになる可能性があります。

　パリティディスクは、データの一貫性を保証するために、各書き込み操作のたびに更新する必要があります。つまり、データが各ディスクに書き込まれるたびに、パリティディスクも更新する必要があります。その結果、パリティディスクは他のディスクと比べて多くのI/O負荷を負うことになり、他のディスクの性能をフルに活用できない可能性があります。

　このボトルネックは、データの書き込みが多い状況で特に顕著になります。そのため、読み取り操作が多い用途ではRAID 3が有効であることもありますが、書き込み操作が多い場合は他のRAIDレベル（例えばRAID 5やRAID 6）の方が適している場合があります。

5. **RAID 4**：データはブロック単位でストライプ化され、パリティ情報は専用のディスクに格納されます。読み取りは高速ですが、書き込みにはパリティ情報を更新する必要があるため、書き込み性能が低下します。
　データアレイの稼働率（3,4共通):$3R^2-2R^3$

6. **RAID 5**：RAID5は、データ本体とともにパリティという誤り訂正符号を複数のディスクに分散して書き込む方式で、耐障害性、アクセスの高速化、大容量化のすべてを実現することができます。
   RAIDにおける #予備ディスク( #ホットスペアディスク)とは、故障したディスクの代替として使用するために用意しておくディスクです。あらかじめ通電状態で待機させておき、他のディスクに故障が発生したときには、故障したディスクを切り離して予備ディスクに故障したディスクのデータを復元し障害発生前の状態に復旧します。
   #パリティ の容量ですが、RAIDを構成するディスク台数に関係なくパリティの保存には常にディスク1台分の容量を要すると決まっているので、データの保存に使える実効容量はディスク4台分
 　RAID4,5は2つのディスクまで故障耐性がある。
 　![[Pasted image 20230722114237.png]]
 　
　ディスク1台稼働率：R, ディスクアレイ稼働率：$3R^2-2R^3$

9. **RAID 6**：RAID 5に似ていますが、2つのパリティ情報が計算され、全ディスクに分散されます。これにより、2つのディスクが同時に故障した場合でもデータは保護されます。ディスク1台稼働率：R, ディスクアレイ稼働率：1 - n*(1-R)^n*(1 + (n-1)*R)

10. **RAID 01**または**RAID 0+1**：ストライピングした装置群をミラリングすることで、高速な読み書き性能と冗長性を提供します。ただし、ディスクの半数が冗長性の確保のために必要であり、コストがかかります。

11. **RAID 10**または**RAID 1+0**：これは、ストライピング（RAID 0の特性）とミラーリング（RAID 1の特性）を組み合わせたものです。最初にRAID 1のミラーリングが行われ、その結果得られたディスクのペアに対してRAID 0のストライピングが適用されます。これにより、高い冗長性（1つのディスクペア内でのディスク故障に耐える）と高いパフォーマンス（データはストライプ化されたディスク間で読み書きされる）を同時に得ることができます。

　　しかし、RAID 10はコスト効率が低いとも言えます。なぜなら、全体のストレージ容量の半分がデータのミラーリングに使われ、使用可能な容量を半減させるからです。そのため、RAID 10は、パフォーマンスと冗長性が非常に重要なシステムで主に使用されます。

　　なお、RAID 10は最低でも4台のディスクが必要です。この場合、使用可能な合計容量はディスク容量の合計の半分になります。

### ECCメモリ
　**ECCメモリ**(Error Check and Correct memory)は、誤り訂正符号としてハミング符号や垂直水平パリティを用いることで、記録内容に発生した誤りを検知＆訂正できる機能をもつメモリです。  
　通常のメモリでも誤り発生回数は5回／年程度に抑えられているので、家庭用や一般ビジネス向けではほとんど必要ありません。ECCメモリが必要なケースと言えるのは極めて信頼性が重要なシステムです。例えば、長時間にわたりミスの許されない計算が求められ、誤りの発生が重大な事態に繋がりかねない学術的分野のシステムなどが挙げられます。

### パリティビット
　**偶数パリティビット**は、1のビットの数が偶数になるようにパリティビットを付加する方式です。  
  
　例）  
　101 … 1のビットが偶数個なのでパリティビットは0 → 1010  
　100 … 1のビットが奇数個なのでパリティビットは1 → 1001  

### ストライピング
ストライピングとは、単語の意味から連想すると、縞模様や縞状に分割する、という意味になります。

RAIDにおけるストライピングは、この言葉が指す通り、データを細かく分割し、それらをディスク間で交互に格納することを指します。つまり、データを縞模様状に分散して書き込むという意味合いがあります。

具体的なイメージとしては、例えばあるファイルのデータを、

- 最初の部分をディスク1に
- 次の部分をディスク2に
- 更に次の部分をディスク3に
- 以降ディスク1、ディスク2...と交互に分散

というように、ディスク間で入れ替えながらデータを書き込んでいく手法です。

このようにストライピングすることで、複数のディスクを並列に使うことができ、読み書き性能が向上するメリットがあります。一方で、1つのディスクが故障するとデータが失われるデメリットもあります。

つまり、ストライピングは「縞模様状にデータを分散する」ことで性能向上を図る手法ということができます。
