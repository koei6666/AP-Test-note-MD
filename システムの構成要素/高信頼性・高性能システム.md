## 高信頼性・高性能システム
　複数のパソコンを組み合わせることによって、高い信頼性（高可用性）と高計算性能を可能にする技術に、クラスタリングとグリッドコンピューティングがある。

#クラスタリング 
#クラスタシステム
　クラスタリングとは、複数のコンピュータを組み合わせて、一つのシステムとして動作させる技術です。これらのコンピュータは一般に「ノード」と呼ばれ、それぞれがプロセッサ、メモリ、ストレージ、ネットワーク接続などを持っています。クラスタ内の全てのノードは、ネットワークを介して相互に通信します。

　クラスタリングの主な利点は以下の通りです：

　1. **高可用性（High Availability, HA）**: 一つのノードが故障した場合でも、他のノードが==ダウンタイムなしで==(ダウンしないことは重要なポイント、故障した後再起動などで復帰する場合はダウンタイムが発生するのでHAシステムではなくなる[[過去問#^d0b369]])その役割を引き継ぎ、サービスを続行します。これは、単一のマシンに依存するシステムと比べてダウンタイムを大幅に減らすことができます。

　2. **スケーラビリティ（Scalability）**: ワークロードが増加した場合、新しいノードを追加することで容易にシステムの容量を増やすことができます。これは、単一のマシンの限界を超えてシステムを拡張する必要がある場合に特に有用です。
　　スケーラビリティを活かして高い計算能力を目的とするハイパフォーマンスクラスタ( #HPCC)がある。

　3. **負荷分散（Load Balancing）**: クラスタ内の複数のノードでタスクを分散することで、全体としてのパフォーマンスを向上させることができます。

　具体的なクラスタシステムの構成方式にはいくつかありますが、HAクラスタ構成について詳しく解説します。

　#HAクラスタ 構成

　HA（High Availability）クラスタは、高い可用性を目指して設計されたクラスタシステムです。これは、一部のシステムが故障してもサービスが継続されるように、冗長性を持たせることによって実現されます。

　HAクラスタでは、一般的にはアクティブ-パッシブ構成またはアクティブ-アクティブ構成が採用されます。

　- **アクティブ-パッシブ構成**　( #フェールオーバシステム ）：この方式では、1つのノード（アクティブノード）が通常時の処理を行い、もう1つまたはそれ以上のノード（パッシブノード）が待機状態(ホットスタンドバイ方式）となります。アクティブノードに障害が発生した場合、パッシブノードが自動的に処理を引き継ぎ（[[高信頼化システムの考え方#^d4e7df|フェールオーバ]]）、サービスを継続します。

　- **アクティブ-アクティブ構成**( #負荷分散クラスタ構成 )：この方式では、全てのノードが常にアクティブ状態となり、処理を分担します。一部のノードが故障した場合でも、残りのノードがその処理を引き継ぎます。
　   Webサーバ、APサーバ、DBサーバではよくこの構成が見られる。

　　HAクラスタは、ビジネスクリティカルなアプリケーション、データベース、メールサーバー、ネットワークサービスなど、ダウンタイムが許されないシステムで広く採用されています。

クラスタシステムには様々な設計方法がありますが、その中でも「Shared Everything」と「Shared Nothing」という2つの重要な設計原則があります。これらはどのようにリソースがクラスタ内のノード間で共有されるかを表しています。

 #SharedEverything 構成
  #シェアードエブリシング

Shared Everythingとは、全てのノードが全てのリソース（メモリ、ディスクストレージ、I/Oデバイスなど）を共有する設計です。各ノードは全てのデータにアクセスでき、データの整合性はハードウェアやソフトウェアによって維持されます。

例えば、一部のデータベースシステム（Oracle RACなど）はShared Everythingアーキテクチャを採用しています。これらのシステムでは、全てのノードが共通のディスクを共有し、全てのノードが全てのデータにアクセスできます。

SE構成の弱点は、ストレージが共有されているため、ストレージの故障がシステムにとっては致命的。稼働率を確保するためには、 RAID10 [[RAID]] などの冗長構造が必要になる。

#SharedNothing 構成
#シェアードナッシング

Shared Nothingとは、各ノードが自身のリソース（メモリ、ディスクストレージ、I/Oデバイスなど）を持ち、他のノードとは独立して動作する設計です。各ノードが独立しているため、一つのノードが故障しても他のノードに影響を与えることはありません。

例えば、分散データベースシステム（GoogleのBigtable、ApacheのHBaseなど）はShared Nothingアーキテクチャを採用しています。これらのシステムでは、データは各ノード間でパーティション（分割）され、各ノードはそのパーティション内のデータを独立して管理します。

これらの設計はトレードオフが存在します。Shared Everything設計はリソースの効率的な利用が可能ですが、データの整合性維持やスケーリングが複雑になりがちです。一方、Shared Nothing設計はスケーラビリティと耐障害性に優れていますが、データの分割やバランシングによる管理の複雑さが増します。

大量なデータを扱うデータウェアハウスではより高性能のシェアナッシング方式を採用していることが多い。

#グリッドコンピューティング 
気象予報や科学計算など大量なデータを扱う、大きな計算量が伴う処理を単位時間内に行うことを #ハイパーフォーマンスコンピューティング　(HPC)と呼ぶ。
HPCを実現する一つの手法はグリッドコンピューティングがある。
グリッドコンピューティングは分散ネットワーク環境上に存在する多数のコンピュータリソースを、仮想的な単一の大規模なコンピューティングリソースとして活用するための技術です。

利用されるリソースは、異なる種類のコンピュータ、異なる地理的な位置にあるコンピュータでも問題ありません。各リソースは独立して動作し、中央のコントロールは存在しないか、または最小限に抑えられています。

処理を分散する流れは、ホストサーバーがタスクを並列可能な単位に分割し、それをネックワーク上のコンピューターで並列処理する。

クラスタリングとグリッドコンピューティングの主な違いは以下の通りです：

1. 管理：クラスタリングでは、全てのノードは一つのシステムとして動作します。すなわち、中央集権的な管理が存在します。一方、グリッドコンピューティングでは、各リソースは独立して動作し、中央のコントロールは存在しないか、または最小限に抑えられています。
    
2. ネットワーク：クラスタリングでは、ノードは通常、高速ネットワークで互いに接続されています。対してグリッドコンピューティングでは、リソースは異なる地理的な位置に分散して存在します。
    
3. リソースの種類：クラスタリングでは、ノードはほとんど同じ種類のハードウェアとソフトウェアを使用します。一方、グリッドコンピューティングでは、リソースは異なる種類のハードウェアとソフトウェアを使用することが可能です。
    
4. タスクの分割：クラスタリングでは、タスクは細かく分割され、それぞれのノードが一部を処理します。対して、グリッドコンピューティングでは、各リソースは全体のタスクの一部を自己完結型で処理することが多いです。

#ロードバランサ
#負荷分散装置
#LB
#LoadBalancer
ロードバランサーはサーバへの要求を一元に管理し、同等の機能を持つ複数のサーバの負荷状況に応じて要求をサーバー間で振り分ける装置。サーバー監視の機能も備えている。
サーバーの稼働監視:
　レイヤは、 #OSI （Open Systems Interconnection）参照モデルのレイヤーを指しています。これは、ネットワークでの通信を概念的に分けて理解するためのモデルです。
　
　レイア３： #ICMP パケットによる装置監視
　**可用性のチェック**：ロードバランサーは定期的に各サーバーに対して信号（通常はHTTP/HTTPSリクエストまたはICMP Echo（ping））を送り、レスポンスを待ちます。レスポンスがない場合、または予期しないレスポンスが返された場合、そのサーバーは利用不可能とみなされ、新しい接続の分散から除外されます。
　
　レイア４：TCPコネクション確立要求に対する応答確認するサービス監視
　このレベルの監視は、トランスポート層（レイヤ4）で行われ、通常はTCP（Transmission Control Protocol）またはUDP（User Datagram Protocol）の接続をチェックします。監視システムは特定のポートに対して接続要求を送信し、その応答を確認します。これは通常、サーバーが稼働しているかどうか、または特定のサービス（例：HTTPサーバーがポート80または443をリッスンしているかどうか）が稼働しているかどうかを確認するために使用されます。
　
　レイア７：アプリケーション監視
　レイヤ7の監視は、アプリケーション層で行われます。ここでは、単にサーバーが稼働しているかどうかだけでなく、特定のアプリケーションが適切に機能しているかどうかを確認します。たとえば、HTTPリクエストを送信し、期待したHTTPレスポンス（通常は200 OK）を受け取ることができるかどうかを確認することができます。
　
負荷分散方式：
　#ラウンドロビン :あらかじめ決まった順序で振り分けをする
　#加重ラウンドロビン:サーバの処理能力によって振り分けをする
　#最小クライアント数 :クライアント接続数の一番小さいサーバーから振り分けをする。
　#最小負荷方式 :CPU使用率が最も低いサーバーから振り分けをする。
