## Webシステムの三層構造
　Webシステムを異なる==物理サーバー==で処理する業務を分離することができる。これを #Web3層構造 と呼ばれる。
　web三層構造では、以下の３種類のサーバーで構成される。
　
　ソフトウェアの設計パターンの一つであり、アプリケーションの内部構造を整理するための方法でモデル層，ビュー層及びコントローラ層の三つの論理的な層でモデル化されたWebシステムMVC構造とは異なる。
　[[MVCシステム]]
　
|名前|役割|
|-------------|--------------------------------------------------------------------|
|Webサーバー |Httpリクエストの受付とレスポンスの返却。静的コンテンツの配信。|
|APサーバー|アプリケーションおよび動的コンテンツ処理の実行|
|DBサーバー|データベース機能|
　WebサーバーとAPサーバーを別の物理サーバーに配置することで、実行する業務と負荷を分割することができる。例えば、WebサーバーにHttpリクエストの受付とレスポンスの返却のほか、静的なコンテンツなど負荷の軽い処理をWebサーバーが行い、CGIなどの重い処理をAPサーバーで実施するように、負荷を分散させることができ、より多くのリクエストを効率よく処理することができるようになる。
　
　#タイムアウト
　三層構造のWEBシステムには、各サーバの処理する内容と所要時間によって、それぞれ異なるタイムアウト時間を設定している。
　三層構造の流れは以下の図になるので、外側のサーバ（WEBサーバ）は中のサーバの応答と処理時間も含めて考慮しないといけないため、タイムアウト時間の設定は外から中まで長いー＞短いのトレンドで変化する。
　WEB server<-->AP Server<-->DB Server ^e4cc3f

### WebサーバとDBサーバの接続手順
![[Pasted image 20230723123944.png]]
**Webサーバ**は、ブラウザとDBサーバの間にたち、ブラウザから受け取ったリクエストを基に組み立てたSQL文でDBサーバに問合せを行い、DBから返された結果をHTML文書に加工してブラウザに返す役割をもっています。
　
#WebSocket
　　http1.0通信では、リクエストごとにTCPコネクションを接続、切断を繰り返し、持続的なコネクションを維持しない。これに対して、Websocketはクライアントとサーバーの間にソケット接続を確立できれば、後の手順はHttpに縛られず、1つのTCPコネクション上で双方向通信を実現できる。

　Web三層構造をはじめとする多くのWebシステムでは、バックエンドにデータベースを置き、ブラウザからデータの検索および登録を行えるようにしている。
　汎用のWebブラウザを使用することで、クライアント側の環境統一をする必要がなく、クライアント側の保守およびそれに係るコストも削減できる。
　そして、クライアント側の性能に関係なく、WEBブラウザさえあればサービス提供できる利点がある。

#CDN
**CDN**(Contents Delivery Network)は、主にWebシステムにおけるコンテンツ配信の高速化・効率化を目指して最適化された配信インフラのことです。CDNは、キャッシュサーバの活用やトラフィック分散、ルーティングの工夫でネットワーク負荷を低減し、ユーザにより速くコンテンツを届けられるように構築されています。ノードとなるサーバは、様々な地域に設置されており、ユーザからのリクエストに応じて、迅速かつ効率的な配信が行われるよう機能しています。  
CDNは、Webサイトだけでなく、音楽や動画(ストリーミングを含む)などのマルチメディアコンテンツ、大容量データの配信を安定的に配信する手段として用いられています。