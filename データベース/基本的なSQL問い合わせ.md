
#### 論理演算子
属性に社員年齢が記録されている表から、24歳以上、28歳以下の社員を探す。
表名：社員表、属性：社員コード、社員名、年齢
論理演算子のANDを使用して検索する。
```SQL
SELECT 社員コード,社員名 FROM 社員表
WHERE 年齢 => 24 AND 年齢 <= 28
```

#### IS NULL
社員コードが空欄の社員を探す
表条件は上記と同じ
```SQL
SELECT 社員名　FROM 社員表
WHERE 社員コード　IS NULL
```
NULLと比較演算子と比較する場合は、結果が不定(Unknown)になる。

#### BETWEEN & IN
論理演算子で検索した年齢条件はBETWEENまたはINで検索することもできる。
```SQL
SELECT 社員コード,社員名 FROM 社員表
WHERE 年齢 BETWEEN 24 AND 28

SELECT 社員コード,社員名 FROM 社員表
WHERE 年齢 IN (24,25,26,27,28)
```
また、論理演算子NOTと組み合わせて、条件以外の結果を求めることもできる
```SQL
\24歳と28歳以外の社員を検索する場合
SELECT 社員コード,社員名 FROM 社員表
WHERE 年齢 NOT BETWEEN 24 AND 28
```

#### LIKE
LIKEはレコードに対してパターン検索することができる。
例えば社員の中、\*子という名前の社員を検索する場合
```SQL
SELECT 社員名 FROM 社員表
WHERE 社員名 LIKE '%子'
```
%はパターン文字といい、文字列の中任意長(1文字以上)の文字を意味する。
NULLは長さがないので、その範囲に含まれない。
最後尾合致で検索する場合は`%Key`,先頭合致で検索する場合は`Key%`,また、先頭の最後尾がわかり、間がわからない場合は`%Key%`で検索することができる。

パターン文字は％の他に、'\_'もある、%は任意長の文字を表すに対し、\_　は1文字を表す。
検索したい文字数がわかり、その他の条件もわかる場合は、以下の検索方法でパータン検索することもできる。
```SQL
SELECT 社員名 FROM 社員表
WHERE 社員名 LIKE '___子'
```

#### グループ化
GROUP BYで列の値をグループ化し、グループごとの平均値、最大値などを求めることができる、そして、HAVINGを使うことで、条件に合致するグループだけ取り出すことができる。
例えば上記の表で、人数2人以上いる部門を取り出す場合、以下のコードで検索できる
```SQL
SELECT 部門コード　部門,COUNT(*) 人数　FROM 社員表
GROUP BY 部門
HAVING COUNT(*) >= 2
\このコードでは、レコードの数を数えて人数として出力する、部門だけ出力したい場合は、以下のコードになる

SELECT 部門コード 部門　FROM 社員表
GROUP BY 部門
HAVING COUNT(社員コード) >= 2
```

SQLで使用できる集合関数は以下の通り
```SQL
SUM(COL) 合計値を求める
AVG(COL) 平均値を求める
MAX(COL) 最大値を求める
MIN(COL) 最小値を求める
COUNT(*) 行の総数（全レコード数を求める)
COUNT(COL) 指定列のレコード数を求める
```

そして出力した結果は、ORDER BYで並び替えすることができる。
```SQL
SELECT 部門コード 部門,COUNT(*) 人数　FROM 社員表
GROUP BY 部門
HAVING 人数 >= 2
ORDER BY 人数　ASC
```

[[副問合せ]]

### 冪等性
**べき等**(Idempotent)とは、コンピュータサイエンスの世界で使われる言葉で、ある操作を1回実行しても複数回実行しても結果が同じになる性質です。主要なデータ操作SQL文のうち、SELECTと障害回復時のUNDO・REDOはべき等、INSERT・UPDATE・DELETEはべき等ではありません。