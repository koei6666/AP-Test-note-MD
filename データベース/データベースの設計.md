## データベース設計の手順
データベースの設計は　概念設計　->　論理設計　->　物理設計の順で行われる。

### 概念設計
概念設計では、対象となる現実世界のデータ全て調査、分析して、抽象化した概念モデルを作成する。
概念モデルはコンピューターシステムへの実装を意識せず、単にデータの意味とその間の関係をあるがままに表現することに重点を置いている。
そのため、概念設計は特定のDBMSを依存せずに、データ間の関連を表現する[[E-R図]]や、UMLのクラス図で表現する。
’UMLクラス図’
![[Pasted image 20230529224841.png|UMLクラス図]]

#### データ分析
業務で使用する帳票や伝票、画面などを調査し、どのようなデータ項目があるのか、どのようなデータ項目が必要なのかを洗い出す。そして洗い出されたデータを一定の基準に従って標準化する。また、各項目の関連を整理して[[データベース正規化の手順|正規化]]する。

> [!NOTE] データ項目標準化
> 1. データ項目名の標準化
>    - **説明**: 同じデータを示す項目名を、システム全体で統一することです。
>    - **実世界の例**: 顧客の名前を示すフィールドがある場合、一つのシステムでは「FirstName」、別のシステムでは「F_Name」などとなっていることがあります。この場合、全て「FirstName」などに統一するとデータの共有や集計が容易になります。
> 2. データ項目意味の定義
>    - **説明**: 各データ項目が何を意味するのか、その定義を明確にして共有することです。
>    - **実世界の例**: 「収益」というデータ項目がある場合、それが純利益なのか、売上高なのか等を明確に定義し、解釈のずれを無くします。
> 3. データ項目の桁数や型の統一
>    - **説明**: 各データ項目のデータ型や桁数を統一することで、データ間の整合性を確保します。
>    - **実世界の例**: 金額を示すデータ項目がある場合、一部のシステムでは整数で保存され、他のシステムでは小数点以下も保存する場合があります。これを統一することで、計算や分析の際にエラーが発生するのを防ぎます。
> 4. 各データ項目の発生源や発生量の明確化
>    - **説明**: 各データ項目の発生源（どこから来たデータなのか）と発生量（どれだけのデータがあるのか）を明確にします。
>    - **実世界の例**: 商品の販売数量データがある場合、それがオンライン販売からのものなのか、店舗販売からのものなのかを明確にし、また、その期間や地域などの発生量を把握することで、正確な分析や予測が可能になります。

データ分析手法には、最初から画面や帳票などのデータを分析した結果として現実型の概念データモデルを作成するボトムアップアプローチと、最初から理想型の概念モデルを作成してからデータ分析を行うトップダウンアプローチがある。
二つのアプローチのどっちかではなく、併用して検証し合うことが重要。

### 概念設計
論理モデルは必ずしもデータベースに実装できるものとは限らないので、次の手順は概念モデルをデータベースに実装できる形式、論理モデルに変換する。
#### 論理データモデル
論理データモデルはまた、データベース構造モデルとも呼ばわれ、利用者とデータベース間のインタフェースの役割を担うデータモデルであるため、データベースのタイプによって、用いられる論理データモデルが異なる。 ^d5a89a


> [!NOTE] データベースのタイプとデータモデル
> 階層モデル：（階層型データベース）
> 　階層構造（木構造）でデータの構造を表現する、親レコードに対して子レコードが複数存在し、子レコードに対して親レコードは一つしか存在しない。親子の多対多関係を表現すると冗長な表現となる。
> 網モデル：（ネットワーク型データベース）
> 　レコード同士を網構造で表現する。親子間の多対多関係も表現できる。
> 関係モデル：（関係型データベース）
> 　データを2次元の表（テーブル）で表現する。1つの表は独立した表であり、親子構造はない。

#### 関係モデルへの変換
関係型データベースの場合、概念モデルをもとに、主キー(Primary Key)と外部キー(Foreign Key)を含めてデータ構造を作成する。
その際、データ各項目に設定される非NULL制約や検査制約などの検討も行う。
そして、利用者が使いやすいようにビューの設計と定義もこの段階で行われる。

#### 物理設計
物理設計は、データベースに要求される性能を満たすための設計。
データの量や利用頻度、さらに運用面も考慮し、最適なアクセス効率および記憶効率が得られるよう、データベースの物理構造を設計する。
具体的な設計項目は：ディスク容量の見積り、ブロック長やインデックス設計、そしてアクセス効率向上を図るための表の分割や複数ディスクへの分割も検討する。
物理設計の結果、十分な性能が得られないと判断された場合、論理設計に戻ってデータ構造の再検討を行う。
#ブロック長
DBMSが読み書きするディスクのI/ O単位はブロックと呼ぶ、ディスクのI/O性能がネックになることが多いので、最適なブロック長を検討する必要がある。

