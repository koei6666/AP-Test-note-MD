## 参照制約
参照制約は、データベースのリレーショナルモデルにおいて、テーブル間の関係を強制するためのルールのことです。これにより、一方のテーブルのあるカラムの値が、他方のテーブルの特定のカラムの値を参照する、といった関係が維持されます。
### 例

以下の2つのテーブルを考えてみましょう。

1. **部門テーブル（Department）**
    
    - department_id: 部門のID
    - department_name: 部門名
2. **従業員テーブル（Employee）**
    
    - employee_id: 従業員のID
    - department_id: 所属部門のID
    - employee_name: 従業員の名前

部門テーブルの`department_id`が主キー（Primary Key）である場合、従業員テーブルの`department_id`カラムは部門テーブルの`department_id`カラムを参照するとします。

この場合、**参照制約**の効果は以下のようになります。

- 従業員テーブルの`department_id`には、部門テーブルの`department_id`に存在する値しか設定できない。
- 部門テーブルから`department_id`が参照されている行を削除しようとするとエラーが発生する（CASCADEオプションを設定した場合は、関連する従業員テーブルの行も削除される）。
- [[データ定義言語|REFERENCE指定]]は以下の文で指定できる：
```SQL
REFERENCES refered_to_table(refered_column)
	[ON DELETE reference_action]
	[ON UPDATE reference_action]
```
指定できる参照動作は以下となる：

| 参照動作      | 内容                                                                                                                                                 |     |
| ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- | --- |
| `NO ACTION`   | 削除・変更は実行するが、これにより参照規約が満たされなくなる場合は実行失敗となる。実行しようとしている行への参照があればUPADTEとDELETE操作はできない |     |
| `RESTRICT`    | 削除や変更を実行する前に参照規約を検査し、当該行が参照されているのであれば実行を拒否。                                                               |     |
| `CASCADE`     | 削除、変更を実行し、さらに該当行を参照するデータがあればその行も削除、変更する。                                                                     |     |
| `SET DEFAULT` | 被参照表の行が削除・変更されたとき、それを参照する表の外部キーへDEFAULT値を設定する。                                                                |     |
| `SET NULL`              |被参照表の行が削除・変更されたとき、それを参照する表の外部キーへNULL値を設定する。                                                                                                                                                                 |     |
### キーポイント

- **整合性の保持**: 参照制約は、データの整合性を保持するために使用されます。
- **制約の強化**: 一貫性のないデータがテーブルに入るのを防ぎます。
- **関係の明確化**: テーブル間の関係を明確にし、データモデルを理解しやすくします。

この制約は、リレーショナルデータベース管理システム（RDBMS）の中で一般的に用いられ、データの一貫性と整合性を保つ重要な役割を果たします。