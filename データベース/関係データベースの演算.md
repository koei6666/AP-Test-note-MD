### 集合演算
関係データベースにおける集合演算は、同じ型の表間で行う和、共通（積）、差の三つの演算。
同じ型の表とは、属性の数（次数）、とドメインが等しい表、このような表を**和両立**と呼ぶ。
同じ方ではない表は、直積演算ができる。

以下の表で、和、共通、差の例を挙げる。
`Table1`

|A|B|
|---|---|
|1|2|
|3|4|

`Table2`

|A|B|
|---|---|
|3|4|
|5|6|

#### 和
A UNION B
AとBを合併し、以下になる。

|A|B|
|---|---|
|1|2|
|3|4|
|5|6|

#### 共通
A INTERSECT B
AとBの共通項を選択し、新しい表で表現する。

|A|B|
|---|---|
|3|4|

#### 差
A EXCEPT B
Aに存在し、Bに存在しない項目を選択し、新しい表で表現する（A-B)

|A|B|
|---|---|
|1|2|

#### 直積

直積とは、2つの表にける全ての行を組み合わせて新しい表を作る演算

|C|D|
|---|---|
|9|8|
|0|7|

|C|D|A|B|
|---|---|---|---|
|9|8|1|2|
|0|7|3|4|

### 関係演算

関係データベースにおける選択（Selection）と射影（Projection）は、データのクエリと操作に使われる基本的な演算です。これらは、データから特定の情報を取り出すために使用されます。

#### 選択（Selection）

選択は、ある特定の条件に合致するタプル（行）を関係から取り出す操作です。選択を行うと、関係の列はそのまま残り、条件に合致する行だけが結果に含まれます。

**記号:** σ

**SQLの例:** ```
```SQL
SELECT * FROM Table1 WHERE A = 1;
```


このクエリは、属性 \( A \) の値が1であるすべての行を `Table1` から選択します。

#### 射影（Projection）

射影は、関係から特定の属性（列）だけを取り出す操作です。射影を行うと、関係の行はそのまま残り、選択された列だけが結果に含まれます。

SQLでは1つの表に同じ内容が2回以上出現することを許容しますが、数学の集合論に基づく関係モデルでは要素の重複が許されません。すなわち厳格に言えば、射影は「列の取り出し→重複の排除」を組み合わせた操作だということになります。

なので重複含む表の射影を取り出す時は、`DINSTINCT`との組み合わせが必要になる。

![[過去問#^projection--]]

**記号:** π

**SQLの例:** ```
```SQL
SELECT A, B FROM Table1;
```

このクエリは、`Table1` から属性 \( A \) と \( B \) だけを取り出します。

#### 選択と射影の組み合わせ

選択と射影は、一般に組み合わせて使用されます。この組み合わせにより、特定の条件に合致する行から特定の列だけを取り出すことができます。

**SQLの例:** ```
```SQL
SELECT A, B FROM Table1 WHERE A = 1;
```

このクエリは、`Table1` から属性 \( A \) の値が1である行を選択し、その中から属性 \( A \) と \( B \) だけを取り出します。

#### 結合
結合演算は、2つの表が共通に持つ項目で結合を行い、新しい表を作り出す関係演算。
一般的にはSQLのSELECT分のFROM句で接合対象の表名をカンマで区切り、WHERE文で結合条件を指定することで表の結合を行う。
結合条件とは、結合列の値を">",">=","\==","!=","<=","<"のいずれかの比較演算子で比較し、結びつける条件を指す。

特に比較演算子が"\=="である場合は等結合と呼ばれる。

#### 商
二つの表R(X,Y1,Y2)とS(Y3,Y4)について、S(Y3,Y4)のすべての行がRに存在する場合に、対応するR(X)を求める演算。
表Rから表Sの全ての行を含めた行を取り出し、そこから表Sの項目が取り除かれる。
例えば属性が「社員コード、社員名、住所、部門コード」となる表の中から、住所が東京で部門が営業部の社員を探す場合、元の表から探す条件（住所：東京、部門：営業）との商を求めることになる。
得た結果は、住所と部分が条件と一致しているレコードで、その上、探す条件との商とのことで、住所と部門の属性は出た検索結果には存在しない。



